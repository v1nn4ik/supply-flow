<div class="supplies-page">
  <div class="page-header">
    <h1>Заявки в снабжение</h1>
    <button class="create-button" (click)="openCreateModal()">
      Создать заявку
    </button>
  </div>

  @if (error) {
    <div class="error-message">
      {{ error }}
    </div>
  }

  <div class="supplies-list">
    @if (supplies.length > 0) {
      @for (supply of supplies; track supply.id || $index) {
        <app-supply-card
          [data]="supply"
          (viewDetails)="openDetailsModal($event)"
          (delete)="handleDeleteSupply($event)"
        ></app-supply-card>
      }
    } @else {
      <div class="empty-state">
        <p>Нет активных заявок в снабжение</p>
      </div>
    }
  </div>

  @if (showCreateModal) {
    <app-create-supply-modal
      (close)="closeCreateModal()"
      (create)="handleCreateSupply($event)"
    ></app-create-supply-modal>
  }

  @if (showDetailsModal && selectedSupply) {
    <app-supply-details-modal
      [data]="selectedSupply"
      (close)="closeDetailsModal()"
      (statusChange)="handleStatusChange($event)"
      (itemUpdate)="handleItemUpdate($event)"
    ></app-supply-details-modal>
  }
</div>

