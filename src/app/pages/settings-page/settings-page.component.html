<header>
  <h1 class="title">
    Настройки
  </h1>
</header>

<div class="settings-container">
  <h1 class="title">Настройки профиля</h1>

  <div class="settings-card">
    <h2>Фото профиля</h2>

    <div class="profile-photo-container">
      <div class="profile-photo" [ngClass]="{'has-photo': profilePhoto}">
        <img *ngIf="profilePhoto" [src]="serverUrl + profilePhoto" alt="Фото профиля" class="profile-image">
        <div *ngIf="!profilePhoto" class="no-photo">
          {{ getInitials() }}
        </div>
      </div>

      <div class="profile-photo-actions">
        <label class="photo-upload-button">
          <input type="file" accept="image/*" (change)="onPhotoSelected($event)" hidden>
          {{ profilePhoto ? 'Изменить фото' : 'Загрузить фото' }}
        </label>

        <button *ngIf="profilePhoto" class="photo-delete-button" (click)="deletePhoto()">
          Удалить фото
        </button>
      </div>
    </div>

    <div *ngIf="photoSuccessMessage" class="success-message">
      {{ photoSuccessMessage }}
    </div>

    <div *ngIf="photoErrorMessage" class="error-message">
      {{ photoErrorMessage }}
    </div>
  </div>

  <div class="settings-card">
    <h2>Личные данные</h2>

    <div class="form-group">
      <label for="lastName">Фамилия</label>
      <input
        id="lastName"
        type="text"
        class="form-input"
        [(ngModel)]="lastName"
        placeholder="Иванов"
      >
    </div>

    <div class="form-group">
      <label for="firstName">Имя</label>
      <input
        id="firstName"
        type="text"
        class="form-input"
        [(ngModel)]="firstName"
        placeholder="Иван"
      >
    </div>

    <div class="form-group">
      <label for="middleName">Отчество</label>
      <input
        id="middleName"
        type="text"
        class="form-input"
        [(ngModel)]="middleName"
        placeholder="Иванович"
      >
    </div>

    <div class="form-group">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Дата рождения</mat-label>
        <input matInput [matDatepicker]="birthDatePicker" [(ngModel)]="birthDate" [max]="maxDate">
        <mat-datepicker-toggle matIconSuffix [for]="birthDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #birthDatePicker></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="button-container">
      <button class="save-button" (click)="saveChanges()">
        Сохранить изменения
      </button>
    </div>

    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  </div>

  <div class="logout-section">
    <button class="logout-button" (click)="logout()">
      Выйти из аккаунта
    </button>
  </div>
</div>
